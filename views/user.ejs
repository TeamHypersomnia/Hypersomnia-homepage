<%- include('overall_header'); %>
<h1><%= nickname %></h1>
<div class="box">
  <div class="table-responsive">
    <table>
      <thead><tr><th>Key</th><th>Value</th></tr><div></div></thead>
      <tbody>
        <tr>
          <td style="min-width: 150px;">External profile</td>
          <td style="min-width: 300px;">
            <a href="<%= profileUrl %>" target="_blank" style="display: flex; align-items: center;">
              <% if (platformName === 'CrazyGames') { %>
                <img src="/assets/images/social_crazygames.png" alt="CrazyGames" style="width: 1.3em; height: 1.3em; margin-right: 0.3em;">
              <% } else { %>
                <i class="<%= platformIconClass %>" style="margin-right: 0.3em;"></i>
              <% } %>
              <%= platformName %><span class="external-link-icon" aria-hidden="true"></span>
            </a>
        </tr>
        <% if (associationType && associatedProfileUrl && associatedId) { %>
        <tr>
          <td style="min-width: 150px;"><%= associationType %></td>
          <td style="min-width: 300px;">
            <a href="<%= associatedProfileUrl %>"><%= associatedId %></a>
          </td>
        </tr>
        <% } %>
        <tr>
          <td style="min-width: 150px;">Name</td>
          <td style="min-width: 300px;"><%= nickname %></td>
        </tr>
        <tr>
          <td>MMR</td>
          <td>
            <img class="rank" src="//cdn.jsdelivr.net/gh/TeamHypersomnia/Hypersomnia@master/hypersomnia/content/gfx/necessary/<%= teamData.rankImg %>" alt="<%= teamData.rankName %>"><%= teamData.mmr.toFixed(6) %>
          </td>
        </tr>
        <tr>
          <td>MMR (FFA)</td>
          <td>
            <img class="rank" src="//cdn.jsdelivr.net/gh/TeamHypersomnia/Hypersomnia@master/hypersomnia/content/gfx/necessary/<%= ffaData.rankImg %>" alt="<%= ffaData.rankName %>"><%= ffaData.mmr.toFixed(6) %>
          </td>
        </tr>
        <tr>
          <td>Matches won</td>
          <td>
            <b><%= teamData.matches_won %></b> 
          </td>
        </tr>
        <tr>
          <td>Matches lost</td>
          <td>
            <b><%= teamData.matches_lost %></b> 
          </td>
        </tr>
        <tr>
          <td>Matches won (FFA)</td>
          <td>
            <b><%= ffaData.matches_won %></b> 
          </td>
        </tr>
        <tr>
          <td>Matches lost (FFA)</td>
          <td>
            <b><%= ffaData.matches_lost %></b> 
          </td>
        </tr>
        <tr>
          <td>Details</td>
          <td>
            <span style="font-family: monospace;">μ = <%= teamData.mu.toFixed(3) %><br>σ = <%= teamData.sigma.toFixed(3) %></span>
            <span style="font-family: monospace;"><br>μ (ffa) = <%= ffaData.mu.toFixed(3) %><br>σ (ffa) = <%= ffaData.sigma.toFixed(3) %></span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="table-responsive">
    <table>
      <thead><tr><th>Time</th><th>MMR</th><th>Description</th></tr><div></div></thead>
      <tbody>
        <% matches.forEach(match => { %>
          <tr>
            <td style="min-width: 150px;"><%= match.time_ago %></td>
            <td><%= match.prev_mmr %></td>
            <td style="min-width: 200px; max-width: 400px; white-space: normal;"><%- match.description %></td>
          </tr>
        <% }); %>
      </tbody>
    </table>
  </div>
</div>

<%- include('overall_footer'); %>
